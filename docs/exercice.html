<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="ASM 2024" />
  <title>Forking, Piping and Redirection</title>
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
  <link rel="stylesheet" href="style.css" />
<style type="text/css">
  :root {
/*
  --color: #2096ba;
  --color-secondary: #2096ba;
  --color-accent: #f7f8fa;
  --color-text: #222426;
  --color-shadow: #c5d2db;
  --width-content: 720px;
  }
*/

  code, samp {
    font-size: 1.2em;
  }

  nav {
    justify-content: space-evenly;
  }


  a:hover {
    filter: none;
    color: #df6e21;
  }
</style>
</head>
<body>
<header id="title-block-header">
  <nav id="TOC">
      <a href="https://asm-2024.github.io/jour3/"><img alt="Logo" src="https://avatars.githubusercontent.com/u/96961500?s=200&amp;v=4" height="70"></a>
            <ul>
          <li><a href="#">Navigation</a>
            <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#tonight-the-nightmare-is-back">Tonight, the nightmare is back</a>
            <ul>
            <li><a href="#cheater.c">cheater.c</a></li>
            </ul></li>
            <li><a href="#extra-exercise">Extra exercise</a></li>
            <li><a href="#correction">Correction</a></li>
            </ul>
          </li>
      </ul>
        </nav>
<h1 class="title">Forking, Piping and Redirection</h1>
<p class="author">ASM 2024</p>
</header>
<main>
<hr>
<article>
<h1 id="introduction">Introduction</h1>
<p>Today you are going to learn how processes are handled in C. This will also teach you the basics of inter-process communication using redirections.</p>
<p>Here is the skeleton for this part: <a href="????">Skeleton</a></p>
<p>To extract the files use the following command:</p>
<pre class="bash"><code>asm$ tar -xf &lt;filename&gt;.tar.gz</code></pre>
<h1 id="tonight-the-nightmare-is-back">Tonight, the nightmare is back</h1>
<p>Remember the yesterday’s practical ? Today will be handling it once again but in a different context. Now that you’ve acquired some new low-level skills, we will be using them to defeat the game.</p>
<p>The context under which we will approach the subject is automatization necessary in many areas of your life as an engineer.</p>
<p>Your goal today is to make a program that will play the signals game (possibly) win against it. The general behaviour of the program is going to be the following :</p>
<pre class="bash"><code>asm$ ./cheater ./&lt;game_binary&gt;</code></pre>
<h2 id="cheater.c">cheater.c</h2>
<p>In this file there’s one provided function and four that you’ll have to do. Have a look at <code>cheater.h</code> to see what how the signal are defined.</p>
<h3 id="string_to_signal">string_to_signal</h3>
<p>This function will be used in the <code>main</code> function. It’s goal is to retrieve the number of the signal based on its textual representation.</p>
<p>Hint : do not forget that in C, arrays are zero-based!</p>
<h3 id="read_until">read_until</h3>
<p>This function is also used in the <code>main</code> function. It’s purpose is to read from the file descriptor <code>fd</code> until the character <code>delim</code> is found. You may assume that in this exercise the buffer <code>buf</code> of size <code>buf_size</code> is large enough. Do not forget append a null byte after the last character read otherwise the sequence won’t be considered as a valid string.</p>
<h3 id="execute">execute</h3>
<p>Here comes the heavy lifting. In this function, you’ll directly use what you’ve learned this morning.</p>
<p>The goal of this function is to execute the <code>executable</code> (a <code>NULL</code> terminated array of strings) in a child process after doing the necessary redirections.</p>
<p>For this function you’ll need to have a look at <code>man 3 execvp</code> which will allow you to execute the <code>executable</code>.</p>
<p>But before you do so, you will have to do the appropriate redirection using <code>man 2 dup</code>. Do not forget to close the appropriate end of the pipe <code>P</code> after having “duplicated” the standard output file descriptor.</p>
<h3 id="main">main</h3>
<p>After having done all the functions from above, it is time to link them together in the main function.</p>
<p>To initialize the pipes, have a look at <code>man 2 pipe</code>. To wait for the children you may use the <code>wait()</code> (see <code>man 2 wait</code>).</p>
<h1 id="extra-exercise">Extra exercise</h1>
<p>For anyone willing to do extra exercises regarding low-level process handling and redirection, we suggest you take a look at the practical given during the past years <a href="https://prepa.pages.epita.fr/asm/strasbourg-c-unix-seminar/practicals/D3/practical3.html">right here</a></p>
<h1 id="correction">Correction</h1>
<p>A correction will be given this weekend. It will be on the Github repository and the link will be given here. This will <strong>not</strong> be the <strong>only</strong> nor <strong>the best</strong> solution to the problem but do take the time to read it as it uses advanced concepts!</p>
<hr>
</article>
</main>
</body>
</html>
